## 多线程

* 多线程
  * 竞争条件
    * 当一个操作的输出取决于不受其控制的另一个过程的时序时，即出现竞争条件
  * 线程池
    * 缓解线程生命周期短的问题
  * 上下文切换
    * 线程数多于CPU核心数会导致线程相互竞争CPU资源，进而造成频繁的上下文切换
    * 在执行过程的中途保存一个线程的状态，然后处理另一个线程，再然后重建第一个线程以继续处理该线程
* Job System
  * 概念
    * 作业系统通过创建作业而不是线程来管理多线程代码，作业系统跨多个核心管理一组工作线程，通常每个逻辑 CPU 核心对应一个工作线程，这样可以避免上下文切换
  * 安全系统
    * 范例问题
      * 如果 C# 作业系统将主线程中对代码数据的引用发送给一个作业，则系统无法验证主线程在读取数据的同时是否该作业正在写入数据。这种情况下便会产生竞争条件。
    * 范例解决方案
      * C# 作业系统解决这个问题的方法是向每个作业发送其需要操作的数据的副本，而不是对主线程中的数据进行引用。此副本可以隔离数据，从而消除竞争条件。

[返回目录](https://hehanxin.github.io/TA/index)